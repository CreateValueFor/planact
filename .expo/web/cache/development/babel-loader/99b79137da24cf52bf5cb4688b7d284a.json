{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _Daily = _interopRequireDefault(require(\"./Daily\"));\n\nvar _jsxFileName = \"/Users/sooyoung/Projects/Planact/src/components/DailyList.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction DailyList(props) {\n  var _this = this;\n\n  var start = props.start,\n      end = props.end,\n      data = props.data,\n      loading = props.loading,\n      loader = props.loader,\n      selector = props.selector;\n  var theme = (0, _reactRedux.useSelector)(function (state) {\n    return state;\n  });\n  (0, _react.useEffect)(function () {\n    if (loading) return;\n  }, [loading]);\n\n  var _useState = (0, _react.useState)(0),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      contentSize = _useState2[0],\n      setContentSize = _useState2[1];\n\n  var getData = function getData(props) {\n    var x;\n    return _regenerator.default.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!loading) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            x = props.nativeEvent.contentOffset.x;\n            if (x < 0) loader(false);else if (contentSize - x < 300) loader(true);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var renderItem = function renderItem(props) {\n    if (loading) return _react.default.createElement(_react.default.Fragment, null);\n\n    var onPress = function onPress() {\n      return selector(props.index);\n    };\n\n    return _react.default.createElement(_Daily.default, (0, _extends2.default)({\n      onPress: onPress\n    }, props.item, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }));\n  };\n\n  return _react.default.createElement(_reactNative.FlatList, {\n    onScrollEndDrag: getData,\n    onContentSizeChange: setContentSize,\n    horizontal: true,\n    showsHorizontalScrollIndicator: true,\n    initialNumToRender: 7,\n    style: styles(theme).scroll,\n    data: data,\n    keyExtractor: function keyExtractor(item) {\n      return String(item.date.format(\"YYYYMMDD\"));\n    },\n    renderItem: renderItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  });\n}\n\nvar styles = function styles(theme) {\n  return _reactNative.StyleSheet.create({\n    scroll: {\n      flex: 1,\n      padding: 5,\n      paddingVertical: 10,\n      backgroundColor: \"#fafafa\"\n    }\n  });\n};\n\nvar _default = DailyList;\nexports.default = _default;","map":{"version":3,"sources":["/Users/sooyoung/Projects/Planact/src/components/DailyList.tsx"],"names":["DailyList","props","start","end","data","loading","loader","selector","theme","state","contentSize","setContentSize","getData","x","nativeEvent","contentOffset","renderItem","onPress","index","item","styles","scroll","String","date","format","StyleSheet","create","flex","padding","paddingVertical","backgroundColor"],"mappings":";;;;;;;;;;;;;AAGA;;AAIA;;AACA;;AAEA;;;;;;;;AAOA,SAASA,SAAT,CAAmBC,KAAnB,EAAyC;AAAA;;AACrC,MAAOC,KAAP,GAAsDD,KAAtD,CAAOC,KAAP;AAAA,MAAcC,GAAd,GAAsDF,KAAtD,CAAcE,GAAd;AAAA,MAAmBC,IAAnB,GAAsDH,KAAtD,CAAmBG,IAAnB;AAAA,MAAyBC,OAAzB,GAAsDJ,KAAtD,CAAyBI,OAAzB;AAAA,MAAkCC,MAAlC,GAAsDL,KAAtD,CAAkCK,MAAlC;AAAA,MAA0CC,QAA1C,GAAsDN,KAAtD,CAA0CM,QAA1C;AACA,MAAMC,KAAK,GAAG,6BAAY,UAACC,KAAD;AAAA,WAAuBA,KAAvB;AAAA,GAAZ,CAAd;AAEA,wBAAU,YAAM;AACZ,QAAGJ,OAAH,EAAY;AAEf,GAHD,EAGG,CAACA,OAAD,CAHH;;AAKA,kBAAsC,qBAAiB,CAAjB,CAAtC;AAAA;AAAA,MAAOK,WAAP;AAAA,MAAoBC,cAApB;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAAOX,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACTI,OADS;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAINQ,YAAAA,CAJM,GAIFZ,KAAK,CAACa,WAAN,CAAkBC,aAAlB,CAAgCF,CAJ9B;AAKZ,gBAAGA,CAAC,GAAG,CAAP,EACIP,MAAM,CAAC,KAAD,CAAN,CADJ,KAEK,IAAGI,WAAW,GAAGG,CAAd,GAAkB,GAArB,EACDP,MAAM,CAAC,IAAD,CAAN;;AARQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAUA,MAAMU,UAAU,GAAG,SAAbA,UAAa,CAACf,KAAD,EAAe;AAC9B,QAAGI,OAAH,EAAY,OAAO,2DAAP;;AACZ,QAAMY,OAAO,GAAG,SAAVA,OAAU;AAAA,aAAMV,QAAQ,CAACN,KAAK,CAACiB,KAAP,CAAd;AAAA,KAAhB;;AACA,WACI,6BAAC,cAAD;AACI,MAAA,OAAO,EAAED;AADb,OAEQhB,KAAK,CAACkB,IAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ;AAKH,GARD;;AAUA,SACI,6BAAC,qBAAD;AACI,IAAA,eAAe,EAAEP,OADrB;AAEI,IAAA,mBAAmB,EAAED,cAFzB;AAGI,IAAA,UAAU,MAHd;AAII,IAAA,8BAA8B,MAJlC;AAKI,IAAA,kBAAkB,EAAE,CALxB;AAMI,IAAA,KAAK,EAAES,MAAM,CAACZ,KAAD,CAAN,CAAca,MANzB;AAOI,IAAA,IAAI,EAAEjB,IAPV;AAQI,IAAA,YAAY,EAAE,sBAACe,IAAD;AAAA,aAAUG,MAAM,CAACH,IAAI,CAACI,IAAL,CAAUC,MAAV,CAAiB,UAAjB,CAAD,CAAhB;AAAA,KARlB;AASI,IAAA,UAAU,EAAER,UAThB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAaH;;AAGD,IAAMI,MAAM,GAAG,SAATA,MAAS,CAACZ,KAAD,EAAwB;AACnC,SAAOiB,wBAAWC,MAAX,CAAkB;AACrBL,IAAAA,MAAM,EAAC;AACHM,MAAAA,IAAI,EAAE,CADH;AAEHC,MAAAA,OAAO,EAAE,CAFN;AAGHC,MAAAA,eAAe,EAAE,EAHd;AAIHC,MAAAA,eAAe,EAAE;AAJd;AADc,GAAlB,CAAP;AAQH,CATD;;eAYe9B,S","sourcesContent":["import { GlobalState } from \"@/../App\";\nimport { IDailyList, IDaily } from \"@/utils/data\";\nimport { Dayjs } from \"dayjs\";\nimport React from \"react\";\nimport { useRef } from \"react\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { Dimensions, FlatList, StyleSheet } from \"react-native\";\nimport { useSelector } from \"react-redux\";\nimport { DefaultTheme } from \"styled-components/native\";\nimport Daily from \"./Daily\";\n\ninterface DailyListProps extends IDailyList {\n    loading: Boolean;\n    selector: (index:number) => void;\n    loader: (after:boolean) => Promise<void>;\n}\nfunction DailyList(props: DailyListProps){\n    const {start, end, data, loading, loader, selector} = props;\n    const theme = useSelector((state:GlobalState) => state);\n\n    useEffect(() => {\n        if(loading) return;\n        \n    }, [loading])\n\n    const [contentSize, setContentSize] = useState<number>(0);\n    const getData = async (props:any) => {\n        if(loading) return;\n        // loader(true);\n\n        const x = props.nativeEvent.contentOffset.x;\n        if(x < 0)\n            loader(false);\n        else if(contentSize - x < 300)\n            loader(true);\n    }\n    const renderItem = (props:any) => {\n        if(loading) return <></>;\n        const onPress = () => selector(props.index)\n        return (\n            <Daily \n                onPress={onPress}\n                {...props.item} \n            />)\n    }\n\n    return(\n        <FlatList\n            onScrollEndDrag={getData}\n            onContentSizeChange={setContentSize}\n            horizontal\n            showsHorizontalScrollIndicator\n            initialNumToRender={7}\n            style={styles(theme).scroll}\n            data={data}\n            keyExtractor={(item) => String(item.date.format(\"YYYYMMDD\") )}\n            renderItem={renderItem}\n            />\n    )\n}\n\n\nconst styles = (theme:DefaultTheme) => {\n    return StyleSheet.create({\n        scroll:{\n            flex: 1,\n            padding: 5,\n            paddingVertical: 10,\n            backgroundColor: \"#fafafa\",\n        },\n    })\n}\n\n\nexport default DailyList;"]},"metadata":{},"sourceType":"script"}