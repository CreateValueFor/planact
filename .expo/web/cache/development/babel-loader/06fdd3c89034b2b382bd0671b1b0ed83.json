{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _Daily = _interopRequireDefault(require(\"./Daily\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\rjqnr\\\\src\\\\planact_test\\\\src\\\\screens\\\\home\\\\DailyList.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction DailyList(props) {\n  var _this = this;\n\n  var start = props.start,\n      end = props.end,\n      data = props.data,\n      loading = props.loading,\n      loader = props.loader,\n      selector = props.selector;\n  var theme = (0, _reactRedux.useSelector)(function (state) {\n    return state.theme;\n  });\n  (0, _react.useEffect)(function () {\n    if (loading) return;\n  }, [loading]);\n\n  var _useState = (0, _react.useState)(0),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      contentSize = _useState2[0],\n      setContentSize = _useState2[1];\n\n  var getData = function getData(props) {\n    var x;\n    return _regenerator.default.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!loading) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            x = props.nativeEvent.contentOffset.x;\n            if (x < 0) loader(false);else if (contentSize - x < 400) loader(true);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var renderItem = function renderItem(props) {\n    if (loading) return _react.default.createElement(_react.default.Fragment, null);\n\n    var onPress = function onPress() {\n      return selector(props.index);\n    };\n\n    return _react.default.createElement(_Daily.default, (0, _extends2.default)({\n      onPress: onPress\n    }, props.item, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    }));\n  };\n\n  return _react.default.createElement(_reactNative.FlatList, {\n    onScrollEndDrag: getData,\n    onContentSizeChange: setContentSize,\n    horizontal: true,\n    showsHorizontalScrollIndicator: true,\n    initialNumToRender: 7,\n    style: styles(theme).scroll,\n    data: data,\n    keyExtractor: function keyExtractor(item) {\n      return String(item.date.format(\"YYYYMMDD\"));\n    },\n    renderItem: renderItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  });\n}\n\nvar styles = function styles(theme) {\n  var mainBackground = theme.mainBackground;\n  return _reactNative.StyleSheet.create({\n    scroll: {\n      flex: 1,\n      padding: 5,\n      paddingVertical: 10,\n      backgroundColor: mainBackground\n    }\n  });\n};\n\nvar _default = DailyList;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/rjqnr/src/planact_test/src/screens/home/DailyList.tsx"],"names":["DailyList","props","start","end","data","loading","loader","selector","theme","state","contentSize","setContentSize","getData","x","nativeEvent","contentOffset","renderItem","onPress","index","item","styles","scroll","String","date","format","mainBackground","StyleSheet","create","flex","padding","paddingVertical","backgroundColor"],"mappings":";;;;;;;;;;;;;AAAA;;AAGA;;AACA;;AAEA;;;;;;;;AAOA,SAASA,SAAT,CAAmBC,KAAnB,EAAyC;AAAA;;AACrC,MAAOC,KAAP,GAAsDD,KAAtD,CAAOC,KAAP;AAAA,MAAcC,GAAd,GAAsDF,KAAtD,CAAcE,GAAd;AAAA,MAAmBC,IAAnB,GAAsDH,KAAtD,CAAmBG,IAAnB;AAAA,MAAyBC,OAAzB,GAAsDJ,KAAtD,CAAyBI,OAAzB;AAAA,MAAkCC,MAAlC,GAAsDL,KAAtD,CAAkCK,MAAlC;AAAA,MAA0CC,QAA1C,GAAsDN,KAAtD,CAA0CM,QAA1C;AACA,MAAMC,KAAK,GAAG,6BAAY,UAACC,KAAD;AAAA,WAAuBA,KAAK,CAACD,KAA7B;AAAA,GAAZ,CAAd;AAEA,wBAAU,YAAM;AACZ,QAAGH,OAAH,EAAY;AAEf,GAHD,EAGG,CAACA,OAAD,CAHH;;AAKA,kBAAsC,qBAAiB,CAAjB,CAAtC;AAAA;AAAA,MAAOK,WAAP;AAAA,MAAoBC,cAApB;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAAOX,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACTI,OADS;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAINQ,YAAAA,CAJM,GAIFZ,KAAK,CAACa,WAAN,CAAkBC,aAAlB,CAAgCF,CAJ9B;AAKZ,gBAAGA,CAAC,GAAG,CAAP,EACIP,MAAM,CAAC,KAAD,CAAN,CADJ,KAEK,IAAGI,WAAW,GAAGG,CAAd,GAAkB,GAArB,EACDP,MAAM,CAAC,IAAD,CAAN;;AARQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAUA,MAAMU,UAAU,GAAG,SAAbA,UAAa,CAACf,KAAD,EAAe;AAC9B,QAAGI,OAAH,EAAY,OAAO,2DAAP;;AACZ,QAAMY,OAAO,GAAG,SAAVA,OAAU;AAAA,aAAMV,QAAQ,CAACN,KAAK,CAACiB,KAAP,CAAd;AAAA,KAAhB;;AACA,WACI,6BAAC,cAAD;AACI,MAAA,OAAO,EAAED;AADb,OAEQhB,KAAK,CAACkB,IAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ;AAKH,GARD;;AAUA,SACI,6BAAC,qBAAD;AACI,IAAA,eAAe,EAAEP,OADrB;AAEI,IAAA,mBAAmB,EAAED,cAFzB;AAGI,IAAA,UAAU,MAHd;AAII,IAAA,8BAA8B,MAJlC;AAKI,IAAA,kBAAkB,EAAE,CALxB;AAMI,IAAA,KAAK,EAAES,MAAM,CAACZ,KAAD,CAAN,CAAca,MANzB;AAOI,IAAA,IAAI,EAAEjB,IAPV;AAQI,IAAA,YAAY,EAAE,sBAACe,IAAD;AAAA,aAAUG,MAAM,CAACH,IAAI,CAACI,IAAL,CAAUC,MAAV,CAAiB,UAAjB,CAAD,CAAhB;AAAA,KARlB;AASI,IAAA,UAAU,EAAER,UAThB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAaH;;AAGD,IAAMI,MAAM,GAAG,SAATA,MAAS,CAACZ,KAAD,EAAwB;AACnC,MAAOiB,cAAP,GAAyBjB,KAAzB,CAAOiB,cAAP;AACA,SAAOC,wBAAWC,MAAX,CAAkB;AACrBN,IAAAA,MAAM,EAAC;AACHO,MAAAA,IAAI,EAAE,CADH;AAEHC,MAAAA,OAAO,EAAE,CAFN;AAGHC,MAAAA,eAAe,EAAE,EAHd;AAIHC,MAAAA,eAAe,EAAEN;AAJd;AADc,GAAlB,CAAP;AAQH,CAVD;;eAaezB,S","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { GlobalState } from '@modules/index';\r\nimport { IDailyList } from \"@/utils/data\";\r\nimport { FlatList, StyleSheet } from \"react-native\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { DefaultTheme } from \"@style/styled\";\r\nimport Daily from \"./Daily\";\r\n\r\ninterface DailyListProps extends IDailyList {\r\n    loading: Boolean;\r\n    selector: (index:number) => void;\r\n    loader: (after:boolean) => Promise<void>;\r\n}\r\nfunction DailyList(props: DailyListProps){\r\n    const {start, end, data, loading, loader, selector} = props;\r\n    const theme = useSelector((state:GlobalState) => state.theme);\r\n\r\n    useEffect(() => {\r\n        if(loading) return;\r\n        \r\n    }, [loading])\r\n\r\n    const [contentSize, setContentSize] = useState<number>(0);\r\n    const getData = async (props:any) => {\r\n        if(loading) return;\r\n        // loader(true);\r\n\r\n        const x = props.nativeEvent.contentOffset.x;\r\n        if(x < 0)\r\n            loader(false);\r\n        else if(contentSize - x < 400)\r\n            loader(true);\r\n    }\r\n    const renderItem = (props:any) => {\r\n        if(loading) return <></>;\r\n        const onPress = () => selector(props.index)\r\n        return (\r\n            <Daily \r\n                onPress={onPress}\r\n                {...props.item} \r\n            />)\r\n    }\r\n\r\n    return(\r\n        <FlatList\r\n            onScrollEndDrag={getData}\r\n            onContentSizeChange={setContentSize}\r\n            horizontal\r\n            showsHorizontalScrollIndicator\r\n            initialNumToRender={7}\r\n            style={styles(theme).scroll}\r\n            data={data}\r\n            keyExtractor={(item) => String(item.date.format(\"YYYYMMDD\") )}\r\n            renderItem={renderItem}\r\n            />\r\n    )\r\n}\r\n\r\n\r\nconst styles = (theme:DefaultTheme) => {\r\n    const {mainBackground} = theme;\r\n    return StyleSheet.create({\r\n        scroll:{\r\n            flex: 1,\r\n            padding: 5,\r\n            paddingVertical: 10,\r\n            backgroundColor: mainBackground,\r\n        },\r\n    })\r\n}\r\n\r\n\r\nexport default DailyList;"]},"metadata":{},"sourceType":"script"}