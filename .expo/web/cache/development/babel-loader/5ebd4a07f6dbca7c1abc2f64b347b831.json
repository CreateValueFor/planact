{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _Daily = _interopRequireDefault(require(\"./Daily\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\rjqnr\\\\src\\\\planact\\\\src\\\\screens\\\\home\\\\DailyList.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction DailyList(props) {\n  var _this = this;\n\n  var start = props.start,\n      end = props.end,\n      data = props.data,\n      loading = props.loading,\n      loader = props.loader,\n      selector = props.selector,\n      selected = props.selected;\n  var theme = (0, _reactRedux.useSelector)(function (state) {\n    return state.theme;\n  });\n  (0, _react.useEffect)(function () {\n    if (loading) return;\n  }, [loading]);\n  (0, _react.useEffect)(function () {}, [selected]);\n\n  var _useState = (0, _react.useState)(0),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      contentSize = _useState2[0],\n      setContentSize = _useState2[1];\n\n  var getData = function getData(props) {\n    var x;\n    return _regenerator.default.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!loading) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            x = props.nativeEvent.contentOffset.x;\n            if (x < 0) loader(false);else if (contentSize - x < 400) loader(true);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var renderItem = function renderItem(props) {\n    if (loading) return _react.default.createElement(_react.default.Fragment, null);\n\n    var onPress = function onPress() {\n      return selector(props.index);\n    };\n\n    return _react.default.createElement(_Daily.default, (0, _extends2.default)({\n      onPress: onPress,\n      selected: selected,\n      index: props.index\n    }, props.item, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  return _react.default.createElement(_reactNative.FlatList, {\n    onScrollEndDrag: getData,\n    onContentSizeChange: setContentSize,\n    horizontal: true,\n    showsHorizontalScrollIndicator: true,\n    initialNumToRender: 7,\n    style: styles(theme).scroll,\n    data: data,\n    keyExtractor: function keyExtractor(item) {\n      return String(item.date.format('YYYYMMDD'));\n    },\n    renderItem: renderItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  });\n}\n\nvar styles = function styles(theme) {\n  var mainBackground = theme.mainBackground;\n  return _reactNative.StyleSheet.create({\n    scroll: {\n      flex: 1,\n      padding: 5,\n      paddingLeft: 15,\n      paddingVertical: 10,\n      backgroundColor: mainBackground\n    }\n  });\n};\n\nvar _default = DailyList;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/rjqnr/src/planact/src/screens/home/DailyList.tsx"],"names":["DailyList","props","start","end","data","loading","loader","selector","selected","theme","state","contentSize","setContentSize","getData","x","nativeEvent","contentOffset","renderItem","onPress","index","item","styles","scroll","String","date","format","mainBackground","StyleSheet","create","flex","padding","paddingLeft","paddingVertical","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { GlobalState } from '@modules/index'\r\nimport { IDailyList } from '@/utils/data'\r\nimport { FlatList, StyleSheet } from 'react-native'\r\nimport { useSelector } from 'react-redux'\r\nimport { DefaultTheme } from '@style/styled'\r\nimport Daily from './Daily'\r\n\r\ninterface DailyListProps extends IDailyList {\r\n  loading: Boolean\r\n  selected: number\r\n  selector: (index: number) => void\r\n  loader: (after: boolean) => Promise<void>\r\n}\r\nfunction DailyList(props: DailyListProps) {\r\n  const { start, end, data, loading, loader, selector, selected } = props\r\n  const theme = useSelector((state: GlobalState) => state.theme)\r\n\r\n  useEffect(() => {\r\n    if (loading) return\r\n  }, [loading])\r\n  useEffect(() => {}, [selected])\r\n\r\n  const [contentSize, setContentSize] = useState<number>(0)\r\n  const getData = async (props: any) => {\r\n    if (loading) return\r\n    // loader(true);\r\n\r\n    const x = props.nativeEvent.contentOffset.x\r\n    if (x < 0) loader(false)\r\n    else if (contentSize - x < 400) loader(true)\r\n  }\r\n  const renderItem = (props: any) => {\r\n    if (loading) return <></>\r\n    const onPress = () => selector(props.index)\r\n    return (\r\n      <Daily\r\n        onPress={onPress}\r\n        selected={selected}\r\n        index={props.index}\r\n        {...props.item}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <FlatList\r\n      onScrollEndDrag={getData}\r\n      onContentSizeChange={setContentSize}\r\n      horizontal\r\n      showsHorizontalScrollIndicator\r\n      initialNumToRender={7}\r\n      style={styles(theme).scroll}\r\n      data={data}\r\n      keyExtractor={(item) => String(item.date.format('YYYYMMDD'))}\r\n      renderItem={renderItem}\r\n    />\r\n  )\r\n}\r\n\r\nconst styles = (theme: DefaultTheme) => {\r\n  const { mainBackground } = theme\r\n  return StyleSheet.create({\r\n    scroll: {\r\n      flex: 1,\r\n      padding: 5,\r\n      paddingLeft: 15,\r\n      paddingVertical: 10,\r\n      backgroundColor: mainBackground,\r\n    },\r\n  })\r\n}\r\n\r\nexport default DailyList\r\n"]},"metadata":{},"sourceType":"script"}